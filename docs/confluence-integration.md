# Интеграция с Confluence
Согласно архитектуре проекта, Confluence используется в модуле формирования ответа на заданный пользователем вопрос, где на основе вопроса в вики-системе осуществляется поиск инструкции или документа, содержащего ответ на этот вопрос.

## Требования к основному пространству Confluence
Пространство на Confluence должно содержать страницы, благодаря этому удастся проанализировать его и повторить в чат-боте структуру страниц, которая в вики-системах называется деревом страниц. Эта структура предусматривает вложенность страниц (одна страница может содержать ссылки на другие страницы), что используется для навигации в пространстве.  Страницы в пространстве могут содержать теги:
 * "справка" — страницы с этим тегом будут отображены в кнопках чат-бота
 * "навигация" — страницы с этим тегом не содержат информацию, полезную для ответов на вопросы, поэтому не учитываются при поиске

Вложения в виде PDF-файлов должны быть машиночитаемыми (из одних сканов они не должны состоять), т. е. текст из них можно скопировать и программно считывать.

## Конфигурация подключения к Confluence
Для подключения к Confluence надо задать следующие переменные среды:
```
CONFLUENCE_TOKEN= # API-токен
CONFLUENCE_HOST= # содержащийся в Confluence адрес вики-системы
CONFLUENCE_SPACES= # пространства в вики-системе
```
Переменные среды подтягиваются в файлах `config.py` с использованием модулей dotenv и os и располагаются в классе `Config`.
